{% extends "base.html" %}

{% block content %}
<table id="playerstats" class="table table-striped">
  <thead>
  <tr>
    <th>Rank</th>
    <th>Name</th>
    <th>Era</th>
    <th>Attack</th>
    <th>Defense</th>
    <th>Attack+Defence</th>
    <th>Era Avg Att/Def</th>
    <th>Goods</th>
    <th>Era Avg Goods</th>
  </tr>
  </thead>
  <tbody>
  {% for player in players %}
  <tr>
    <td>{{ player.rank }}</td>
    <td>{{ player.name }}</td>
    <td>{{ player.era }}</td>
    <td>{{ player.attack }}</td>
    <td>{{ player.defence }}</td>
    <td>{{ player.attdef }}</td>
    <td>{{ player.era_avg_attdef }}</td>
    <td>{{ player.goods }}</td>
    <td>{{ player.era_avg_goods }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function () {
    $('#data').DataTable({
      columns: [
        {orderable: true, searchable: false},
        {orderable: true, searchable: true},
        {orderable: true, searchable: true},
        {orderable: true, searchable: false},
        {orderable: true, searchable: false},
        {orderable: true, searchable: false},
        {orderable: false, searchable: false},
        {orderable: true, searchable: false},
        {orderable: false, searchable: false}],
        "createdRow": function( row, data, dataIndex ) {
          if ( data[3] < 2357 ) {
            $(row).find('td:eq(3)').addClass('red');
        }
      }
    });
  });
</script>
{% endblock %}